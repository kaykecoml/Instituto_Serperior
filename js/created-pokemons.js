import { initAuthUI } from './auth.js';
import { deleteCreatedPokemon, getCreatedPokemonsByNick, getProfile } from './storage.js';
const $=(id)=>document.getElementById(id);
function setupMenu(){const btn=$('logoMenuBtn'),m=$('sideMenu'),b=$('sideMenuBackdrop');btn.onclick=()=>{m.classList.add('open');b.classList.remove('hidden')};b.onclick=()=>{m.classList.remove('open');b.classList.add('hidden')}}
function render(){const profile=getProfile();if(!profile){$('createdList').innerHTML='<p class="name">Faça login para ver seus pokémons criados.</p>';return;}const list=getCreatedPokemonsByNick(profile.nick);if(!list.length){$('createdList').innerHTML='<p class="name">Nenhum pokémon salvo.</p>';return;}$('createdList').innerHTML=list.map((i)=>`<article class="created-item"><img src="${i.data.customImage||i.data.pokemon?.sprites?.front_default||''}" alt="${i.data.pokemon?.name||'pokemon'}"><div><h4>${i.data.nickname||i.data.pokemon?.name||'Pokémon'} (#${String(i.data.pokemon?.id||0).padStart(4,'0')})</h4><p>Nível ${i.data.level} | ${i.data.mode==='trained'?'Adestrado':'Selvagem'} ${i.data.shiny?'| shiny':''} ${i.data.alpha?'| alpha':''}</p><p>${new Date(i.createdAt).toLocaleString('pt-BR')}</p></div><div class="created-actions"><a href="creation.html?id=${i.id}">Abrir</a><button data-del="${i.id}">Excluir</button></div></article>`).join('');document.querySelectorAll('[data-del]').forEach((b)=>b.onclick=()=>{deleteCreatedPokemon(b.dataset.del);render();});}
setupMenu();initAuthUI({linksProvider:()=>({creation:'creation.html',created:'created-pokemons.html'})});render();
